var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};define(["require","exports","external/react","modules/clean/display_format","modules/clean/loggers/file_preview_logger","modules/clean/previews/util","modules/clean/react/button","modules/clean/react/image","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/file_viewer/open_button","modules/clean/react/open_in_app/button","modules/clean/react/share_download/button","modules/clean/em_string","modules/clean/static_urls","modules/clean/web_timing_logger","modules/core/i18n","modules/core/notify"],function(e,t,n,i,r,o,s,l,p,a,c,u,_,h,v,m,d,f){"use strict";var E=16,w=function(e){function t(){var t=this;e.apply(this,arguments),this.onClickDownload=function(){t.logFilePreviewEvent(p.EventTypes.FILE_PREVIEW_FILE_DOWNLOADED)},this.onClickShowContents=function(e){e.preventDefault(),t.logFilePreviewEvent(p.EventTypes.FILE_PREVIEW_SHOW_CONTENTS_ATTEMPTED),f.error(d._("We haven’t built this feature yet, but thank you for showing interest!")),t.logFilePreviewEvent(p.EventTypes.FILE_PREVIEW_SHOW_CONTENTS_FAILED)}}return __extends(t,e),t.prototype.componentDidMount=function(){this.setUpLogger(),this.logFilePreviewTimeline(p.EventTypes.FILE_PREVIEW_SUPPORT_CONFIRMED),this.logFilePreviewTimeline(p.EventTypes.FILE_PREVIEW_DOWNLOAD_ATTEMPTED),this.logFilePreviewTimeline(p.EventTypes.FILE_PREVIEW_DOWNLOAD_SUCCEEDED),this.markWebTiming(),this.logFilePreviewTimeline(p.EventTypes.FILE_PREVIEW_RENDER_SUCCEEDED)},t.prototype.componentWillUnmount=function(){this.teardownLogger()},t.prototype.setUpLogger=function(){this.logger&&this.teardownLogger(),this.logger=new r.FilePreviewArchiveLogger,this.logger.listenTo(a)},t.prototype.teardownLogger=function(){this.logger.unlistenTo(a),delete this.logger},t.prototype.logFilePreviewTimeline=function(e){this.props.filePreviewSession&&this.props.filePreviewSession.recordEvent(e,{preview_type:this.props.file.preview_type})},t.prototype.logFilePreviewEvent=function(e){a.emit(e,this.props.filePreviewSession,{preview_type:this.props.file.preview_type})},t.prototype.markWebTiming=function(){m.mark_time_to_view(),m.mark_time_to_interactive()},Object.defineProperty(t.prototype,"isSharedFile",{get:function(){return Boolean(this.props.sharedLinkInfo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowOpenInApp",{get:function(){return Boolean(this.props.file.open_in_app_data)},enumerable:!0,configurable:!0}),t.prototype.renderIcon=function(){return n.createElement(l,{className:"preview-archive__icon",src:v.static_url("/static/images/previews/archive-vflhGD-YR.png"),srcHiRes:v.static_url("/static/images/previews/archive@2x-vfl2j4qq-.png")})},t.prototype.renderMessage=function(){return n.createElement("div",{className:"preview-archive__message"},d._("See what’s inside this compressed file."))},t.prototype.renderFileInfo=function(){var e=o.PreviewHelper.get_filename(this.props.file);return n.createElement("div",{className:"preview-archive__info"},h.em_snippet(e,E),n.createElement("span",{className:"separator"},"·"),i.format_bytes(this.props.file.bytes))},t.prototype.renderControls=function(){return n.createElement("div",{className:"preview-archive__controls"},this.renderShowContentsButton(),this.renderDownloadOrOpenButton())},t.prototype.renderShowContentsButton=function(){return n.createElement(s.Button,{className:"show-contents-button",onClick:this.onClickShowContents},d._("See inside"))},t.prototype.renderDownloadOrOpenButton=function(){return this.isSharedFile?this.allowOpenInApp?n.createElement(u.OpenInAppButton,{urls:this.props.file.open_in_app_data}):n.createElement(_,{sharedLinkInfo:this.props.sharedLinkInfo,shareToken:this.props.shareToken,sharePermissions:this.props.sharePermission,fileOrFolder:this.props.file,justifyRight:!1,onClick:this.onClickDownload}):n.createElement(c,{file:this.props.file,user:this.props.user,justifyRight:!1,onClick:this.onClickDownload})},t.prototype.render=function(){return n.createElement("div",{className:"preview-content preview-content--center preview-archive"},n.createElement("div",{className:"c-modal c-modal--unibody preview-archive__wrapper"},n.createElement("div",{className:"c-modal__content preview-archive__content"},this.renderIcon(),this.renderMessage(),this.renderFileInfo(),this.renderControls())))},t}(n.Component);t.PreviewArchive=w});
//# sourceMappingURL=preview_archive.min.js-vflI5IZPR.map